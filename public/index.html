<!DOCTYPE html>
<html>
<head>
    <title>Simple Simon</title>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <style>
        .container{
            width: 350px;
            border: solid black 4px;
        }
        .square{
            height: 150px;
            width: 150px;
            border: solid black 1px;
        }
        #red{
            opacity: .5;
            background-color: red;
            margin: 10px;
        }
        #blue{
            opacity: .5;
            background-color: blue;
            margin: 10px;
        }
        #green{
            opacity: .5;
            background-color: green;
            margin: 10px;
        }
        #yellow{
            opacity: .5;
            background-color: yellow;
            margin: 10px;
        }

    </style>
</head>
<body>
<div class="container">
<div class="row">
<div class="square col-md-6" id="red">0</div>
<div class="square col-md-6" id="blue">1</div>
</div>
<div class="row">
<div class="square col-md-6" id="green">2</div>
<div class="square col-md-6" id="yellow">3</div>
</div>
</div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
(function() {
    $(".square").html("")

    var random = 0;
    var max = 4;
    var sequence;
    var count = 0;
    var j = 0;
    // function randomColorPicker(){
    // sequence = []; // array to hold correct pattern
    // random = Math.floor(Math.random() * $('.square').length);   //picks random squares
    //     $('.square').eq(random).css("opacity", "1");
    //     console.log(random);
    //     sequence.push(random);
    //     var timeoutId = setTimeout(function ()
    //         {
    //           $(".square").removeAttr('style');
    //         }, 1000);
    // }

    //     var count = 0;      //running sequence number of times
    //     var max = 2;            
    //     var intervalId = setInterval(function () {
    //         if (count >= max) {
    //             clearInterval(intervalId);
                
    //             console.log('All done');
    //         } else {
    //             randomColorPicker()
    //             count++;
    //         }
    //     }, 1500);   
        
    function randomColorPicker(){
        sequence = []; // array to hold correct pattern
            for(var i = 0; i < max; i++){
                random = Math.floor(Math.random() * $('.square').length);
                
                sequence.push(random);
                console.log(random);
            }



            var intervalId = setInterval(function () {
            if (count >= max){
                clearInterval(intervalId);
                
                console.log('All done');
            } else {
                count++;
                j++;
                
                $('.square').eq(sequence[j-1]).css("opacity","1");
              

              var timeoutId = setTimeout(function ()
            {
              $(".square").removeAttr('style');
          }, 1000);

            }
            
        }, 1500);
                console.log(sequence);

    }  



    randomColorPicker();
    var i = 0;
    var userInput; //user input 
    var green = 2;
    $(".square").mouseup(function(e){
        $(this).css("opacity", ".5");
        if (this.id =="red"){
            userInput = 0;
        }
        if (this.id =="blue"){
            userInput = 1;
        }
        if (this.id =="green"){
            userInput = 2;
        }
        if (this.id =="yellow"){
            userInput = 3;
        }
        console.log(userInput);
        
        if (userInput == sequence[i]){ // if keycode is equal to konami code first element go to next element...
            i++;
            console.log("yes");
        } else {    // if wrong key presesed set i back to 0
            i = 0;
            console.log("Start Over");
        }
    });
    $(".square").mousedown(function(){
        $(this).css("opacity", "1");
    });




          

})();
</script>
</body>
</html>